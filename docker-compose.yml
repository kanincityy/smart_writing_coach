version: '3.8'

services:
  backend:
    build: ./backend  # Tells Docker to build this service using the Dockerfile in the ./backend directory
    container_name: backend_service
    env_file:
      - ./.env    # Loads environment variables from the .env file

  frontend:
    build: ./frontend  # Builds the service using the Dockerfile in the ./frontend directory
    container_name: frontend_service
    ports:
      - "8501:8501" # Maps port 8501 on your computer to port 8501 in the container
    depends_on:
      - backend     # Tells the frontend to wait for the backend to start first
    environment:
      # This is the magic! The frontend can now find the backend at the URL "http://backend:8000"
      - BACKEND_URL=http://backend:8000